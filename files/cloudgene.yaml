name: mitocloud
description: A cloud platform to check the quality of mitochondrial data
version: v0.0.1
 
workflow:

  setups:
    - name: Input Validation
      jar: mitocloud.jar
      classname: genepi.mitocloud.steps.InputValidation

  steps:


    - name: Run Haplogrep
      jar: mitocloud.jar
      classname: genepi.mitocloud.steps.HaplogrepStep
      output: $haplogrep
      
    - name: Contamination Checker 
      jar: mitocloud.jar
      classname: genepi.mitocloud.steps.ContaminationStep
      output: $contamination
      
    - name: Running report script
      type: rmd_docker
      rmd: report.Rmd
      image: seb
      params: $haplogrep $contamination
      output: ${report}.html
            
  inputs:

    - id: files
      description: Input Files (VCF)
      type: local-file
    
    - id: level
      description: Minor Detection Level
      type: text
      visible: true 
      value: 0.01  
      
  outputs:  
   
    - id: haplogrep
      description: HaploGrep2 Output
      type: local-file
      download: true
      
    - id: contamination
      description: Contamination Output
      type: local-file
      download: true
      
    - id: report
      description: Quality-Control Report
      type: local-file
      download: true