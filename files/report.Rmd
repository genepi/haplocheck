---
title: "mitocloud - quality control for mitochondrial projects"
output: 
  flexdashboard::flex_dashboard:
    storyboard: true
---

```{r setup, include=FALSE, echo=FALSE}
library(DT);
library(plotly);
library(dplyr);
knitr::opts_chunk$set(message = FALSE)
```

### Summary

```{r results, echo=FALSE}

args<-commandArgs(TRUE)
input=args[1]
input = "/data2/git/cloudgene/workspace/job-20181130-124941-442/contaminationReport/contaminationReport"
readin = read.table(input, header = TRUE, sep="\t");
extract = readin[,c("SampleID","Contamination","HgMajor","HgMinor", "HG_Distance")]
datatable(extract,filter = 'top',options = list(initComplete = JS(
    "function(settings, json) {",
    "$('body').css({'font-family': 'Helvetica'});",
    "}"
  ), pageLength = 15, autoWidth = TRUE)) %>% formatStyle(
  'HG_Distance',
  backgroundColor = styleInterval(c(1,3), c('white', 'khaki','lightcoral'))
)
```

### Haplogroups

```{r haplogroups, echo=FALSE}
extract$Major = substr(extract$HgMajor, start = 0, stop = 2)
p <- extract %>%
  group_by(Major) %>%
  summarize(count = n()) %>%
  plot_ly(labels = ~Major, values = ~count) %>%
  add_pie(hole = 0.6) %>%
  layout(title = "Haplogroups with HaploGrep2",  showlegend = F,
         xaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE),
         yaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE))
p

```
